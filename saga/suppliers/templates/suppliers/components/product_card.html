{% comment %}
Composant de carte produit réutilisable
Paramètres :
- product : l'objet produit à afficher
- image_url : l'URL de l'image (optionnel, par défaut utilise product.image_urls.main ou product.image.url)
{% endcomment %}

<a href="{% url 'product:product_detail' product.id %}" class="block">
    <div class="mx-auto group relative w-full bg-white h-[500px] p-4 rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
        <!-- Titre et variante -->
        <div class="mb-2">
            <h3 class="font-bold text-lg text-gray-900 truncate">
                {{ product.title }}
            </h3>
            <div class="mt-1 flex items-center gap-2">
                {% if product.phone %}
                <div class="w-4 h-4 rounded-full border border-gray-200" 
                     style="background-color: {{ product.color.code }}"
                     title="{{ product.color.name }}">
                </div>
                <p class="text-sm font-medium text-gray-600">
                    {{ product.color.name }} - {{ product.phone.storage }} Go / {{ product.phone.ram }} Go RAM
                </p>
                {% endif %}
            </div>
        </div>

        <!-- Image principale -->
        <div class="mb-2 h-[300px] flex items-center justify-center">
            {% if product.image_urls and product.image_urls.main %}
                <img src="{{ product.image_urls.main }}" 
                     alt="{{ product.title }}"
                     class="max-w-full max-h-full object-contain"
                     loading="lazy">
            {% elif product.image and product.image.url %}
                <img src="{{ product.image.url }}" 
                     alt="{{ product.title }}"
                     class="max-w-full max-h-full object-contain"
                     loading="lazy">
            {% else %}
                <div class="w-full h-full bg-gray-100 flex items-center justify-center rounded-lg">
                    <span class="text-gray-400">Aucune image disponible</span>
                </div>
            {% endif %}
        </div>

        <!-- Prix et bouton panier -->
        <div class="absolute bottom-4 left-4 right-4">
            <div class="flex justify-between items-center">
                <p class="text-lg font-bold text-yellow-500">
                    {{ product.price|floatformat:0 }} FCFA
                </p>
                <button hx-get="{% url 'cart:get_product_options' product.id %}"
                        hx-target="#product-options-content"
                        hx-trigger="click"
                        onclick="event.preventDefault(); openProductOptions({{ product.id }});"
                        class="p-3 rounded-full text-green-600 hover:text-white shadow-lg hover:bg-green-600 hover:shadow-green-300/50 hover:scale-110 transition-all duration-300">
                    <svg class="h-6 w-6 transition-transform duration-300 group-hover:rotate-12"
                         xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                         aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</a> 